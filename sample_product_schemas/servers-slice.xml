<productSchema xmlns="http://docs.rackspace.com/core/usage/schema"
               namespace="http://docs.rackspace.com/event/servers"
               serviceCode="CloudServers"
               version="1" resourceTypes="SLICE">
    <description>
        Usage message for a slice.
    </description>
    <attribute name="flavor" type="unsignedInt"
               use="required" min="0" max="25"
               groupBy="true">
        The flavor id of the slice.
    </attribute>
    <attribute name="extraPublicIPs" type="unsignedInt"
               use="optional" unitOfMeasure="COUNT"
               default="0" min="0" max="150"
               groupBy="true">
        The number of extra public IPs.  Defaults to zero.
    </attribute>
    <attribute name="extraPrivateIPs" type="unsignedInt"
               use="optional" unitOfMeasure="COUNT"
               default="0" min="0" max="150"
               groupBy="true">
        The number of extra private IPs.  Defaults to zero.
    </attribute>
    <attribute name="isRedHat" type="boolean"
               use="optional" default="false" 
               unitOfMeasure="COUNT" aggregateFunction="MAX_CONCURRENT"
               groupBy="true">
        Does the slice use a RedHat license.
    </attribute>
    <attribute name="isMSSQL" type="boolean"
               use="optional" default="false"
               groupBy="true">
        Does the slice use an MSSQL license.
    </attribute>
    <attribute name="isMSSQLWeb" type="boolean"
               use="optional" default="false"
               groupBy="true">
        Does the slice use an MSSQL Web license.
    </attribute>
    <attribute name="isWindows" type="boolean"
               use="optional" default="false"
               groupBy="true">
        Does the slice use a Windows license.
    </attribute>
    <attribute name="isSELinux" type="boolean"
               use="optional" default="false"
               groupBy="true">
        Does the slice use an SELinux license.
    </attribute>
    <attribute name="isManaged" type="boolean"
               use="optional" default="false"
               groupBy="true">
        Is this a managed slice.
    </attribute>
    <xpathAssertion test="if (@isRedHat = 1) then
                          ((@isSELinux = 0) and (@isWindows = 0) and
                          (@isMSSQL = 0) and (@isMSSQLWeb = 0)) else true()">
        If slice isRedHat then it cannot be SELinux, Windows, MSSQL or MSSQLQWeb.
    </xpathAssertion>
    <xpathAssertion test="if (@isSELinux = 1) then
                          ((@isRedHat = 0) and (@isWindows = 0) and
                          (@isMSSQL = 0) and (@isMSSQLWeb = 0)) else true()">
        If slice isSELinux then it cannot be RedHat, Windows, MSSQL or MSSQLQWeb.
    </xpathAssertion>
    <xpathAssertion test="if (@isWindows = 1) then
                          ((@isRedHat = 0) and (@isSELinux = 0)) else true()">
        If slice isWindows then it cannot be RedHat or SELinux.
    </xpathAssertion>
    <xpathAssertion test="if (@isMSSQL = 1) then
                          ((@isWindows = 1) and (@isMSSQLWeb = 0) and (@isRedHat = 0) and (@isSELinux = 0)) else true()">
        If slice isMSSQL then it has to be windows, and not RedHat, SELinux or MSSQLWeb.
    </xpathAssertion>
    <xpathAssertion test="if (@isMSSQLWeb = 1) then
                          ((@isWindows = 1) and (@isMSSQL = 0) and (@isRedHat = 0) and (@isSELinux = 0)) else true()">
        If slice isMSSQLWeb then it has to be windows, and not RedHat, SELinux or MSSQL.
    </xpathAssertion>
</productSchema>
