<productSchema xmlns="http://docs.rackspace.com/core/usage/schema"
               namespace="http://docs.rackspace.com/event/nova/host"
               serviceCode="CloudServersOpenStack"
               version="1" resourceTypes="HOST"
               type="UP DOWN">
    <description>
        UP / DOWN messages for Nova.
    </description>
    <attribute name="collector" type="string"
               use="required">
        The hostname of the collector.
    </attribute>
    <attribute name="checkType" type="string"
               use="required" allowedValues="PING">
        The check type.
    </attribute>
    <attribute name="checkStatus" type="string"
               use="required" allowedValues="CRITICAL OK">
        The check status.
    </attribute>
    <attribute name="description" type="string"
               use="required">
        The description
    </attribute>
    <xpathAssertion xmlns:novaHost="http://docs.rackspace.com/event/nova/host"
               scope="entry" name="checkUp"
               test="if (/atom:entry/atom:content/event:event/@type = 'UP') then not(/atom:entry/atom:content/event:event/novaHost:product/@checkStatus = 'CRITICAL') else true()">
        For event type UP, checkStatus can not be CRITICAL.
    </xpathAssertion>
    <xpathAssertion xmlns:novaHost="http://docs.rackspace.com/event/nova/host"
               scope="entry" name="checkDown"
               test="if (/atom:entry/atom:content/event:event/@type = 'DOWN') then not(/atom:entry/atom:content/event:event/novaHost:product/@checkStatus = 'OK') else true()">
        For event type DOWN, checkStatus can not be OK. 
    </xpathAssertion>
</productSchema>
