<productSchema xmlns="http://docs.rackspace.com/core/usage/schema"
               namespace="http://docs.rackspace.com/event/nova/host"
               serviceCode="CloudServersOpenStack"
               version="1" resourceTypes="HOST"
               type="UP DOWN">
    <description>
        UP / DOWN messages for Nova.
    </description>
    <attribute name="status" type="string"
               use="required">
        The status of the event.
    </attribute>
    <attribute name="collector" type="string"
               use="required">
        The hostname of the collector.
    </attribute>
    <attribute name="checkType" type="string"
               use="required" allowedValues="PING">
        The check type.
    </attribute>
    <attribute name="checkStatus" type="string"
               use="required" allowedValues="CRITICAL OK">
        The check status.
    </attribute>
    <attribute name="description" type="string"
               use="required">
        The description
    </attribute>
    <xpathAssertion test="if (@type = 'DOWN') then
                           not(@checkStatus = 'OK') else true()">
        If message is DOWN type then checkStatus cannot be OK.
    </xpathAssertion>
    <xpathAssertion test="if (@type = 'UP') then
                          not(@checkStatus = 'CRITICAL') else true()">
        If message is UP type then checkStatus cannot be CRITICAL.
    </xpathAssertion>
</productSchema>
